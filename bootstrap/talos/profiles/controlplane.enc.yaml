version: v1alpha1
debug: false
persist: true
machine:
  type: controlplane
  token: ENC[AES256_GCM,data:UNGWlr75w2HaF2w3AoBj4a2hKvqYr0g=,iv:gidiG+eCD8nfapFr3NB4qidO4YZASMCyN+pwn+J4tC8=,tag:0ZrrUPGbAVB/oDgxfQLq0g==,type:str]
  ca:
    crt: ENC[AES256_GCM,data:i/vm1LE7C7Q1UEmjmlYq8NHFtbYlmRdJXBjfRxXKNrAZ3syJMlB7yU20Pc5Est0xS8wOdsvKMyWYOSRqmXM8V+7KiluZkAkdtAAquWz+VvjL5b8D9Y1vwENHhx66aUo34lhtyCzmQj6+IbSjm7yZDOkAqB46xPu+zdTjYhxV3+NbrqUD8Ygxt9uKVLR7VGoIDM1K81urZacpQhFdy8e2hRK29crqbB78dgMag2BEi10313tSIZmGpN3fwuPITIhwQ7DRf4Atfs3jqo6nSL+GryAEUc1NEsfVlymvjzxn5E0WQ3cD5Yjz6rPQ7aLpbMQD70i0YjM3to9b9Af6CE5oVeeeCID7hi9BMI3IC6s27Wb/XheYgSTkalab2vvfUg2d5cUW5qKB2hBYwAbv7/NOEXj9Uk3twOPFudoOhQTpCEHIBTJNDVeiENO68BAZW/6CuOmeeyd2JrOa24V3qU1mhNb+mPkrZpTrucqP42y0QYxP3UkMFBY98eJN7etzS51jJPKTdR0WqXX3hFUvbTwn5tovrn1GzAo/FtUBgjvs1KmBeP/UYWVRbZAVG2DFgt5nGnkPPR+yFW5Vp6HgD2ben4Xm74eYW2EUcp7X3fh7ivT5AeyqUk4wU/o4PRQVf1r0leilTPHiNdGkqMbNWf5wBHV5cMc1bpwhe5PosPakxx6sD4btGo+pfohYf2mZW6CADAMRzMF7bbOpyqDeKHbbY4UdAK0ccwCpTKh37C5vtRZ62Y7ZfzSk1G8Q0uHmOKBBYBQshWdAS8/1u7AZOR8Fzd5v6k+Cg7uXVWBMj5mzqImWJ5NxnsvzKnO6W4XObnIqcD6a+xzKChIucnSB1oHB0La/9ms2ogJTBulSetN+hq/iJAGR,iv:34TWZEG3UAA816XsZuF7X/OSTVg5tgCJBm79NATzudY=,tag:07lvSPXORp0fL7JxBOY1Zw==,type:str]
    key: ENC[AES256_GCM,data:xW8/HUb4MGDfL+F6pthpkqK4u9NpCSTyBoVc7fEySJEoS8+wcfsSk1syzIy9IjdQ6O1+abU+0j7X9gNtAuRMZsBk8NtOy+OnmriqGKixlRuZwhqh23B3F1ruUgGZLVwbuqmdwd/Ams00RkKOgFu36S7WAltYGvvML9BJ1F3mJBf4EGjqs9/KVCm2LZtIY3E0hqK3hSwxfGdzOL00dub4eH1wMXzm5aC7FD8Di3P7dDtTBHD8,iv:A2c7IEoujJfnTtyfllnKw+RIfmXv8VJ63yW11iRQQ0s=,tag:WuMxJsCNrU0ae6YD3Bg6Aw==,type:str]
  certSANs:
    - 192.168.45.40
    - home-cluster.milton.mcf.io
    - mcf-k8s-cluster.milton.mcf.io
  kubelet:
    image: ghcr.io/siderolabs/kubelet:${KUBERNETES_VERSION}
    extraArgs:
      rotate-server-certificates: "true"
    defaultRuntimeSeccompProfileEnabled: true
    nodeIP:
      validSubnets:
        - 192.168.45.0/24
    disableManifestsDirectory: true
  network:
    interfaces:
      - deviceSelector:
          hardwareAddr: bc:24:11:*
        mtu: 9000
        dhcp: true
        vip:
          ip: 192.168.45.40
    nameservers:
      - 192.168.30.1
    disableSearchDomain: true
  install:
    image: factory.talos.dev/installer/${TALOS_SCHEMATIC_ID}:${TALOS_VERSION}
    bootloader: true
    wipe: true
    diskSelector:
      busPath: /pci0000:00/0000:00:1e.0/0000:05:01.0/0000:06:0a.0/*
  registries: {}
  features:
    rbac: true
    stableHostname: true
    kubernetesTalosAPIAccess:
      enabled: true
      allowedRoles:
        - os:admin
      allowedKubernetesNamespaces:
        - system-upgrade
    apidCheckExtKeyUsage: true
    kubePrism:
      enabled: true
      port: 7445
    hostDNS:
      enabled: true
      resolveMemberNames: true
      forwardKubeDNSToHost: false
  nodeLabels:
    topology.kubernetes.io/region: milton
    topology.kubernetes.io/zone: home-cluster
cluster:
  id: ENC[AES256_GCM,data:UzsB48A00CWBu34tUIS3KY2iV1Cmvt8ztbm0z8F6x16q3Dn2hmpEft2M7/Y=,iv:xqwgEtRF9b6Y9WpoVSjKSYpbJ2Rl57dQbdHTI7284u0=,tag:imEAcU1DmrNA7MJXPK2Yog==,type:str]
  secret: ENC[AES256_GCM,data:WlsM1tWDsNhI423RDZ5fEipgK6o+D/T5fVBlljCU/N9IvWMlcdMfac0vWsM=,iv:lXBb0ssAV3py6/jysgjAm60xFa3Sxv1/WrLrz0q0PFY=,tag:LUYuuHKCzuccxvfZXyDEFQ==,type:str]
  controlPlane:
    endpoint: https://192.168.45.40:6443
  clusterName: home-cluster
  network:
    cni:
      name: none
    dnsDomain: cluster.local
    podSubnets:
      - 10.244.0.0/18
    serviceSubnets:
      - 10.244.64.0/20
  token: ENC[AES256_GCM,data:G8ZV0sFkCmLR9SznwcHb8/YI9UeRKEs=,iv:3FS5A1yyOFh5Tdo8bkO6LFebed+3eIwbXvGRAm92qmg=,tag:jlnaUO6tr9si3xfrQSOKSg==,type:str]
  secretboxEncryptionSecret: ENC[AES256_GCM,data:mAyg+jC5ZkOP864FqEPj+EMeRrGZF+YwVWFlibTo8XzNDf/uZd3QhgwPXrs=,iv:o3iqcA0y3xKeaaBAhv/p2LjQ0rCO+c8esAr3yGN3j9o=,tag:xZI4AuJl6CDhg95LVVRuHw==,type:str]
  ca:
    crt: ENC[AES256_GCM,data:Ef/kgYh2VIXAOQeQfHzcI7edDTIX81IFwNd8x6VgsggSgfH0e2/eLphBa2r0EZjyRMe004kR2DeQDCvtCdaVQ4UrYZNJj1OYeU5EUbNOz756XwX/cYi7+NoSuMCstTrNYtoFIqcX0Tn5JG0aSm9P/JSCNi44wHMqhRaZeZoSnz8KoEQpEgDmSdLJro7uW3MbOaqwZqw7GCmyn/MSrZS7y22rpg7aKREP7Z+IQJ2ynG3bRKXj+0iaST3DwFe8aMO+7KP2R+noUu9+pwqPYBw6m/OgvewZu0lSagV6/aG2y4/gm4tJJY410lC5VW00G+9Iw+9Tn5gt++CmCqI0ttIIn+sNRp/ocJfMdPB/DaFFrqQfC44fW2jiXB8MfQzhw47g/YfS5akSuUxvm9PZYkEqSaR2bE8+30AcqS4tDcahgYkxb1SkXZrxsVxjvN77BoM5Zln7EtPk0xLX5YU0e5KBguPn89JT1E8mpSxPHiNL+Hd0VGamT+zEGqhUgqtiC6PM9wA28porC87i9dWBWks+uxRu27dCkMMq7iwZIzsskWksqCMiP3To5VL0vl7kqUfUwD7GA170zfKWiYrW1CLcU8lUYrVa9RnNtOhikw8GaDkcLG3rZhv8d42vC/IqENvI6jPcAp4T0QaHdciTPk/WVOYEegpX5Z2tgOhdRGQNPATH3it99PrpOOJNhkhGbJ8jGmD7ZcFqfl0L9qEShHiL7KHBR/JizEZvt8/tszIfm+lrgWNnZzavrJ9sVbmBzn2zQf/uQDc730Ovb1iDvGiBIYJK0FYq2DC9dXYpI39Yd9aemJ9EwQse6+T/++1PMOEXaykhPiug3zabZDqZqpmRqzDBOnQqTaHTwLkjpHSobTG5YbSktnaJZCM1whPo6V2+DnNehSSpVYM3BUpzNq3uMz+nOYdf7eg2AGX6SbX1pIt53WOu3kzukdg04rG2V19kfetXWdq4YQhsm8TQuuxg82Gaw+KWAPhpfEr46o4THObFcpBoFj23SC/hyEu28eewvYNsatfde/Lpowd/4wYdxfzc5lRid19qNgAT0A==,iv:WIQIyh2wfWFO/dM/XC2KBHK0LSux/Mq5kqv1KDxUKHY=,tag:athVK3Xc0S/NZITe94MmnA==,type:str]
    key: ENC[AES256_GCM,data:M/CpMcDT6eORBSBZmbOhq32Sv9SXQ1aa01ULUrcPvwdnynUlB/JDiaVxgUCUKiXV4cKJlPF4RkldNen0wFzZTfOd65AvqUvsXQOb0drDgyKcDhI8dsNDCdBVJG7U/idZLwJmRpTREZ0ahwpWVznVgFk2yDT1H9s8Twuk4HrwAE5oH1J5HNKR7GoPAxlWS9l8s+kxDGPY1r6aCYqILHWwlL8GP1ThfCPEeKTEiRj/VdmM7o975ILc+vV/gPrI6M9BtqN7afg+0pNapMkXPfp++Y0qS4+4o+JkHshU8IUtrY3aLjDwznOV/2z8e2zd3dhDGDT5WaIX/5D+XlD2w0SHD4mngwsaEdEN6LGBhNLeFnL+4QflKEhbIqlozF5DytOQFM0zPK2KbcxtFhCGJdyeLw==,iv:2B6vHRfskjyR8y0SnTfqACvq3XckRPKCTxvEc6nUGB4=,tag:hVdRkJmAhVqj1S6xIU+hwQ==,type:str]
  aggregatorCA:
    crt: ENC[AES256_GCM,data:aBxUX0+eZOPo9psFqelROMaWDgRqPt+ANUW0riWysXJVQPMubM87z0I8vXx1waUblukV7kM/K79p15x0gpYlZhc1Rt19ezdZ9uuU/rkq+anGIF7Yit6zeBSAH01LIR39qz+mN+UoHVEB99nM5MkHKnZoknDH5dEfjsVO0q5BSr0rFsM/e7xVCsEQ/nS+BWRj/M7s1f0N5AWfDj0BM24crjxHH5Qz0bnSjtkBMJ30d1gAera5Kg2CIjmu3AkRU4feBfM3lnkM0nDLRZ8I2ed8nzqWawYB+T+FgzXtH+6NsTpTbzlY1knzc2MEolrINPrjZKUFBj9tBcoyGMyqvi9TIFHLL7k4iZtgiVI8vdSe1Xcbxgglhc08G4bzTi4fla/zow1LI8YFxrlXn8KaAj4MGR0/yq5FneNly9w+BCWpsL8NEsN9dOzq040/5+JHnk9cWO6LInl3152ByA0jPPm3VyIebkfBrvU2yoGQ8eRbUzcNy8BZJml8G3X6csNC0yAI7tmXluKSs+/4jXmiGWT/tgZxmZJ/Hhj8BO9S0PCmIopjnrQiLmvlIAkuDxjss4RPGl5Zu+HPwl5xV88Rl2tbsyqpr2RYYaIrNzKVP7ymmJu5raANp3xdFowiGFELfWzqskA4xVJwV+HvXi1pI6pxM4M1e2eWd4jaE7Xi6fNhA6qcGFonQw6bRDGuzonO18bzGaOfwh0SZLpRHbUBA2nndU9ysHNZSYMkvjXs18b32O0A3EZ2j51HOOUunxzFqVWYmv6elXVns1fzkjUuiHG/XYOWHy2X+62NeECBXXz/YxHRsWZdGGgVTtvh4axfcpqC1Zm2eV6NAQ7AfhmTbemXdcAvOBVCk4xE/1/+xSfrN7CQsVGIs/28Z9QIhvxz4a7juM33M8fw11x9XmFsFw0yckSBHTKC3LD8gWKmTFnoL6UEXSEcJtPdjw4vgWGva4rs,iv:NRS4XyozR116+Y6sInJ+THBT8sdcue9gNMfqH4jriGE=,tag:NUDFCyLmwhCdf09BJM4Ejw==,type:str]
    key: ENC[AES256_GCM,data:K1Y4cFEl5xR9Wyb/emjiN7/9xksITYhigO9cqBa45ueUICY/puW9/3Li8GQhI28ABnyuQcnkcsYM2mZicK6d2g+Tv/7kdpvsCtpkcUVYAeLUS1DDgDiRSx9IL5y+4XNqpR+rnZtgOXHorvHOPbNufHs3JwZdif/D1sDbect5vwFr/u5x2QUQ2zPtGn3kXWFaQnsQxC6N2CleA5KmZt2nin2ZCQnG8z1PxxoDjnRfcSpFKbFdE8C0ZSGIjZMfq1ngYr3dXObUlWqCmsCM3Q6FroMn8sQaMdIEZPITenr5SC58rFG/nwbVAVPVpo9i7gQzm8kQUCmi4VMXjyrB4ztZItDwidF7+GovByx2BNZ85mXCgfCdI1wfheNDkoFhp4O1rK9EbvGuKjHYKsqCCOmJ7Q==,iv:C0Y73e8lpGyh4n9Rh80hxg5erY87NKHijUYrUsD+RvI=,tag:17cGtj0wNgjP6n23c5/LyA==,type:str]
  serviceAccount:
    key: ENC[AES256_GCM,data:g2wMxe0Nn/RLnf4r11UV7h+vwLe3tQIwKcm/SMII/OqUGslZOS//B1XLNbYqRj9ZNkNZ3Ru0avgFJcUbfhDzU0ltXDc1c3WKN4aYN/MjhPHav7cR2DtZrZUolewHJu2n13wHSCL0PgvuZ1FtW0PXCAwL/c755IuKJe/7xBN3b+T59KK4F/sxZIG5AcDFw5yu23d+cSy+ya0VzVvwXtU3dymQIxbfrVucsazAV0XaDMVsc7SO7C/WQEB9Rbu08IOXzLQqzMdMf9Q3gKC6UYhHteDZQDHgPHMyCo0E8+Pc8KXMyOdCHuG4t84+CO18vQ0S7ZhnQprLaiasw7bDioiwQCNuD95HUkmZNNwAvooIgU1HKhzw4qDyMV8nAxwds/K7WRUQU3hljdvSLjQAQShb3A==,iv:7V8sGpc72v1tpI81WmmpXZvHNKUZtY0eUkAOIybrzOk=,tag:2nX4UCa6QvBfN6c6iWCWQw==,type:str]
  apiServer:
    image: registry.k8s.io/kube-apiserver:${KUBERNETES_VERSION}
    extraArgs:
      anonymous-auth: "true"
    certSANs:
      - 192.168.45.40
      - home-cluster.milton.mcf.io
      - mcf-k8s-cluster.milton.mcf.io
    disablePodSecurityPolicy: true
    admissionControl:
      - name: PodSecurity
        configuration:
          apiVersion: pod-security.admission.config.k8s.io/v1alpha1
          defaults:
            audit: restricted
            audit-version: latest
            enforce: baseline
            enforce-version: latest
            warn: restricted
            warn-version: latest
          exemptions:
            namespaces:
              - kube-system
              - openebs-system
              - rook-ceph
            runtimeClasses: []
            usernames: []
          kind: PodSecurityConfiguration
    auditPolicy:
      apiVersion: audit.k8s.io/v1
      kind: Policy
      rules:
        - level: Metadata
  controllerManager:
    image: registry.k8s.io/kube-controller-manager:${KUBERNETES_VERSION}
  proxy:
    disabled: true
    image: registry.k8s.io/kube-proxy:${KUBERNETES_VERSION}
  scheduler:
    image: registry.k8s.io/kube-scheduler:${KUBERNETES_VERSION}
  discovery:
    enabled: true
    registries:
      kubernetes:
        disabled: false
      service:
        disabled: true
  etcd:
    ca:
      crt: ENC[AES256_GCM,data:UKMJn5gPz/CPGmRs9OBRT8UZ4el/a1ll6zCcImO0UgAyOuQ6/QEktjoL+VuOjJf/A2U0gi82HxEQagexz6uPENv4qyPGLLOSnhMh8TmX3v2hCHIH9xQxgkuH13zu/vw8h4EPDAX46go4ZdTzu20KjNpHmrEbkX/WSurZm2PoZNigu0f4dz7eAUEtQhoW7s+KGoj7b/KG6P4rnwRSD3QjE5QZBDvN/GmrExFiNGfm3et4slVp1vLiaEJiUq5n/KPzKUVP6/ApUXqW06XLDmEuM6S/XsJsAPdYPJL6z5x96vWT8KZW1STGcgZFi+V0TbdTtd6s9nVOS5bG4pRXHHe13FjIrqHgdp0mjpAFBJeZ6YOW48QXDm7WyzrJWT9EgedeBo4gCx2YgKh/yEzb1Ef5P5WsfR0Ao4kdWbGtbunyEe0zEENmiIoHZ1Jhr6DEvRL+VN8TzfSmjcxxslGs54eEQHeanv5xprXShACnOj7dl+DdNKMD/zdrpV0AnoCi/5hAFbVgtcVaOGNNqbLEp0pHGavFcZrvM4xtD0878RJrQuJVuLSKUw84Mq/iu34b8GLks+n3/BZTIMxS28PzMhEYl9Pg1P/7rsE8uRp/l35Gxkenq9L6lMhBacPtVYBEZiZWamkAoQ1fWO2L/ADsMwCNw5PvQPjbwJqod1zwTzuvyFPRA/tkv3mQRO+kpC2AHJH8gGwFssonfF7fm3u2twA6e0yxyUirIXVWEClA+bduKNIkIe36sOY9XtbqLATXZo/J53s34M8hHWxYGZIlOyjhVYcwIgcbLZGANxVv3Ckl5hzqvBPmgtAA/Zg1M2BYudsuLwRNVTXnzMN2K/3hvUXjXrJnSefG1FpbqWcOBKlmzy+w21DMQ0FyY3Ia1MA2vGSOchmaMr++QVMukDVOpT1BheYJ2DOM4dj3TRbsikkE/UgV3EXfS5y/yyNq7xeOCIkIz7WEL3sYsVAuWamFTy4JQpN1vtmaLe7reIhZK0LYMVNJyJERWMa6ZTSVQeXEcsMGPyRwFQ==,iv:9apDEF0p3hoAYuR59nE/ze6E4RfJyZ4N5x+OVWZa3+4=,tag:qtkfmBaireEIapkvRi6cgA==,type:str]
      key: ENC[AES256_GCM,data:bsBsbbvu0zHEwl7hMyAokGNnGFTZgGxVi0+EPKyhM3Q76ZbdKi87xK4HEZBJiB82UFnJ8JlEnfdrKmz5SnEMJr+ftB4rycaNPDxc+oZmV5rvvnw7wYAJ+IYniJZe9/s7U5wmGGbGuy1vbjwqYZy45estaNwLMuwr59zaL7fiu+56L7FyJXzviIxh9VB4LJwRPS7Ee3Ro5LAZQrON2TQH9e3lAGnIR5qGbKR13Q6O26CoS6eABTW7XPNmnicey4BVEs98UWA9MDeu0pgYyJnT3RKhT0orxybrMRHXkWBK+7aoEJrhV6KEIh+TdA/jbw9hHuXxi7MPzlFk3vfTaFOaIGGp59g4hQOWy3sJaP7T6BCUILailyUL5vXZnbZr1S22cEXI27cch85LhkOMLwUFNw==,iv:VxsrfBKP4HC5ZOpV90cNUV7g118hZUBB+3xozrGk2CA=,tag:1N/AbttJThY1dDIMl9Op+g==,type:str]
    advertisedSubnets:
      - 192.168.45.0/24
sops:
  kms: []
  gcp_kms: []
  azure_kv: []
  hc_vault: []
  age:
    - recipient: age13g8vu0uypup5ulq059xrs0gh4nkecvhhpkqmjdp3gpuc4w8q9c4sjys65q
      enc: |
        -----BEGIN AGE ENCRYPTED FILE-----
        YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBXK2JxNHFyenJMdGdLVUdu
        WXV3azVycXJzTVBVd0JMaitUL1JWN0VmQ1dFCnFHQzdvL1JhOS9tdGhuUVJuUHNF
        NmJ0Vm5hUXY3NWpHc1JlZmY2S1ZKc28KLS0tIGhvWWhEU0RaODhIL2t4OUJHN0R3
        NjNUaXN0emdSMUI1bVorQmUrYXRwOFEKw2iiEmQzLzEIHMjsjmi0QFAm95rjinUM
        XpQBY358TbwRvW8FzrstmAYKZYIa+cqOPK1kje77zbioLJTqLxqAFg==
        -----END AGE ENCRYPTED FILE-----
  lastmodified: "2024-10-11T03:02:47Z"
  mac: ENC[AES256_GCM,data:jXo1O73BTKE4poRu7nn2EDmOZrIbDEUx9dySum37WglPs9p6nplDO3lO8ANxkw0y6/Qgk82niQyvSAqQIm7oMNPaq0wXRmvKUfhGFtV1KckzulzWgCwbX9c4Oax8oIpmv4E9cM4JKNNlHrt23m4S0+BF4uMpCYKyOHPR0Lq69Hw=,iv:eP5J7Wq0eg3KQl65qsz8L9ViDaVpBLd8OPyCc8jQU+4=,tag:09805pIoOU96/t46pSNv/A==,type:str]
  pgp: []
  encrypted_regex: ^(token|crt|key|id|secret|secretboxEncryptionSecret|ca)$
  version: 3.9.1
